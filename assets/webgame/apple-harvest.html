<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üçé ÏÇ¨Í≥º ÏàòÌôï Í≤åÏûÑ</title>

    <meta name="description" content="Ïà´ÏûêÎ•º Ïó∞Í≤∞Ìï¥ÏÑú Ìï©Ïù¥ 10Ïù¥ ÎêòÎèÑÎ°ù ÎßåÎìúÎäî ÌçºÏ¶ê Í≤åÏûÑ">
    <meta name="theme-color" content="#22C55E">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ÏÇ¨Í≥ºÏàòÌôï">

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }

        @keyframes fallDown {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(300px) rotate(720deg);
                opacity: 0;
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(-25%);
                animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
            }
            50% {
                transform: translateY(0);
                animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .apple-fall {
            animation: fallDown 0.8s ease-in forwards;
        }

        .animate-bounce {
            animation: bounce 1s infinite;
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Main container */
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(to bottom right, #4ade80, #16a34a);
            padding: 1rem;
        }

        /* Game card */
        .game-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(4px);
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            padding: 1.5rem;
            max-width: 80rem;
            position: relative;
            overflow: hidden;
        }

        /* Header */
        .game-header {
            text-align: center;
            margin-bottom: 1rem;
        }

        .game-title {
            font-size: 1.875rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.25rem;
        }

        .game-subtitle {
            color: #4b5563;
            font-size: 0.875rem;
        }

        /* Start screen */
        .start-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8rem 0;
        }

        .start-icon {
            font-size: 6rem;
            margin-bottom: 1.5rem;
        }

        .start-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1rem;
        }

        .start-desc {
            color: #4b5563;
            margin-bottom: 0.5rem;
        }

        .start-hint {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .start-example {
            color: #9ca3af;
            font-size: 0.75rem;
            margin-bottom: 2rem;
        }

        /* Buttons */
        .btn-start {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: #22c55e;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            border: none;
            cursor: pointer;
            font-size: 1.125rem;
            font-weight: 600;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            transition: all 0.2s;
        }

        .btn-start:hover {
            background-color: #16a34a;
            transform: scale(1.05);
        }

        .btn-restart {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: #22c55e;
            color: white;
            padding: 0.375rem 0.75rem;
            border-radius: 9999px;
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
            transition: background-color 0.2s;
        }

        .btn-restart:hover {
            background-color: #16a34a;
        }

        .btn-home {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background-color: #6b7280;
            color: white;
            padding: 0.5rem;
            border-radius: 9999px;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            z-index: 30;
        }

        .btn-home:hover {
            background-color: #4b5563;
        }

        .btn-retry {
            background-color: #22c55e;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.125rem;
            transition: all 0.2s;
        }

        .btn-retry:hover {
            background-color: #16a34a;
            transform: scale(1.05);
        }

        /* Score info box */
        .score-info-box {
            background-color: #dcfce7;
            border-radius: 0.5rem;
            padding: 1rem;
            font-size: 0.875rem;
            max-width: 28rem;
        }

        .score-info-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #374151;
        }

        .score-info-list {
            color: #4b5563;
            list-style: none;
        }

        .score-info-list li {
            margin-bottom: 0.25rem;
        }

        /* Game status bar */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .score-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: #fef3c7;
            padding: 0.375rem 0.75rem;
            border-radius: 9999px;
        }

        .score-badge-icon {
            font-size: 1.125rem;
        }

        .score-badge-text {
            font-size: 1.125rem;
            font-weight: 700;
            color: #1f2937;
        }

        .combo-badge {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            background-color: #ffedd5;
            padding: 0.375rem 0.75rem;
            border-radius: 9999px;
        }

        .combo-badge-icon {
            font-size: 1.125rem;
        }

        .combo-badge-text {
            font-size: 1.125rem;
            font-weight: 700;
            color: #ea580c;
        }

        .timer-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.375rem 0.75rem;
            border-radius: 9999px;
        }

        .timer-badge.normal {
            background-color: #dcfce7;
        }

        .timer-badge.warning {
            background-color: #fee2e2;
        }

        .timer-badge-icon {
            font-size: 1.125rem;
        }

        .timer-badge-text {
            font-size: 1.125rem;
            font-weight: 700;
        }

        .timer-badge-text.normal {
            color: #16a34a;
        }

        .timer-badge-text.warning {
            color: #dc2626;
        }

        /* Game grid */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(15, minmax(0, 1fr));
            gap: 0.25rem;
            padding: 1rem;
            background: linear-gradient(to bottom, #f0fdf4, #dcfce7);
            border-radius: 1rem;
            user-select: none;
            position: relative;
            min-height: 600px;
        }

        /* Grid cell */
        .grid-cell {
            position: relative;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .grid-cell:not(.empty):hover {
            transform: scale(1.1);
        }

        .grid-cell.selected {
            transform: scale(1.25);
            z-index: 10;
        }

        .grid-cell.animating {
            z-index: 20;
        }

        .grid-cell.hint {
            box-shadow: 0 0 0 2px #facc15;
            border-radius: 0.5rem;
        }

        .apple-container {
            position: relative;
        }

        .apple-emoji {
            font-size: 3rem;
        }

        .apple-emoji.bright {
            filter: brightness(1.1);
        }

        .apple-number {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1.125rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8), -1px -1px 2px rgba(0,0,0,0.8);
        }

        .apple-number.hidden {
            opacity: 0;
        }

        /* Path indicator */
        .path-indicator {
            position: absolute;
            top: -0.5rem;
            right: -0.5rem;
        }

        .path-indicator-icon {
            font-size: 1.25rem;
            filter: drop-shadow(0 0 3px rgba(255, 255, 0, 0.8));
        }

        .line-horizontal {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            pointer-events: none;
        }

        .line-horizontal-inner {
            width: 100%;
            height: 0.25rem;
            background-color: #facc15;
            opacity: 0.5;
        }

        .line-vertical {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .line-vertical-inner {
            width: 0.25rem;
            height: 100%;
            background-color: #facc15;
            opacity: 0.5;
        }

        /* Combo popup */
        .combo-popup {
            position: absolute;
            top: 5rem;
            left: 50%;
            transform: translateX(-50%);
            pointer-events: none;
            z-index: 30;
        }

        .combo-popup-inner {
            background: linear-gradient(to right, rgba(249, 115, 22, 0.8), rgba(239, 68, 68, 0.8));
            backdrop-filter: blur(4px);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            font-size: 1.5rem;
            font-weight: 700;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }

        /* Game over overlay */
        .game-over-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }

        .game-over-box {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
        }

        .game-over-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .game-over-title {
            font-size: 1.875rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }

        .game-over-score {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #374151;
        }

        .game-over-score-value {
            color: #16a34a;
            font-weight: 700;
        }

        /* Footer tips */
        .footer-tips {
            margin-top: 1rem;
            text-align: center;
            color: #4b5563;
        }

        .footer-tips p {
            font-size: 0.75rem;
            margin-bottom: 0.25rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const { useState, useEffect, useRef, createElement: e } = React;

        function NumberTenGame() {
            const [grid, setGrid] = useState([]);
            const [selectedCells, setSelectedCells] = useState([]);
            const [score, setScore] = useState(0);
            const [dragState, setDragState] = useState({
                isDragging: false,
                direction: null,
                path: []
            });
            const [animations, setAnimations] = useState([]);
            const [timeLeft, setTimeLeft] = useState(120);
            const [gameOver, setGameOver] = useState(false);
            const [gameStarted, setGameStarted] = useState(false);
            const [lastMoveTime, setLastMoveTime] = useState(Date.now());
            const [hintCells, setHintCells] = useState([]);
            const [combo, setCombo] = useState(0);
            const [lastSuccessTime, setLastSuccessTime] = useState(null);
            const [showCombo, setShowCombo] = useState(false);
            const timerRef = useRef(null);
            const hintTimerRef = useRef(null);

            // 10Ïù¥ ÎêòÎäî Ï°∞Ìï©Îì§
            const COMBINATIONS = {
                2: [[1,9], [2,8], [3,7], [4,6], [5,5]],
                3: [[1,2,7], [1,3,6], [1,4,5], [2,3,5], [2,2,6], [3,3,4], [1,1,8]],
                4: [[1,2,3,4], [1,1,3,5], [1,2,2,5], [2,2,2,4], [1,1,4,4], [1,1,2,6]],
                5: [[1,1,1,1,6], [1,1,1,2,5], [1,1,2,2,4], [1,1,1,3,4]],
                6: [[1,1,1,1,1,5], [1,1,1,1,2,4], [1,1,1,2,2,3]],
                7: [[1,1,1,1,1,1,4], [1,1,1,1,1,2,3]],
                8: [[1,1,1,1,1,1,1,3], [1,1,1,1,1,1,2,2]],
                9: [[1,1,1,1,1,1,1,1,2]]
            };

            // ÎùºÏù∏Î≥ÑÎ°ú Ìï¥Í≤∞ Í∞ÄÎä•Ìïú Ïà´Ïûê Î∞∞Ïπò ÏÉùÏÑ±
            const generateLine = (length) => {
                const line = [];
                let remaining = length;

                while (remaining > 0) {
                    const possibleSizes = Object.keys(COMBINATIONS)
                        .map(Number)
                        .filter(size => size <= remaining && size <= 9);

                    if (possibleSizes.length === 0) {
                        line.push(1);
                        remaining--;
                    } else {
                        const weights = possibleSizes.map(size => size <= 3 ? 4 : size <= 5 ? 2 : 1);
                        const totalWeight = weights.reduce((a, b) => a + b, 0);
                        let random = Math.random() * totalWeight;

                        let selectedSize = 2;
                        for (let i = 0; i < possibleSizes.length; i++) {
                            random -= weights[i];
                            if (random <= 0) {
                                selectedSize = possibleSizes[i];
                                break;
                            }
                        }

                        const combos = COMBINATIONS[selectedSize];
                        const combo = combos[Math.floor(Math.random() * combos.length)];
                        line.push(...combo);
                        remaining -= combo.length;
                    }
                }

                // ÎùºÏù∏ ÎÇ¥ÏóêÏÑú ÏÑûÍ∏∞
                for (let i = line.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [line[i], line[j]] = [line[j], line[i]];

                    if (i >= 2 && line[i] === line[i-1] && line[i] === line[i-2]) {
                        const k = Math.floor(Math.random() * line.length);
                        [line[i], line[k]] = [line[k], line[i]];
                    }
                }

                return line;
            };

            // Í∑†ÌòïÏû°Ìûå Í∑∏Î¶¨Îìú ÏÉùÏÑ±
            const generateGrid = () => {
                const grid = [];

                for (let i = 0; i < 15; i++) {
                    grid[i] = generateLine(15);
                }

                for (let col = 0; col < 15; col++) {
                    if (Math.random() < 0.3) {
                        const columnValues = generateLine(15);
                        for (let row = 0; row < 15; row++) {
                            grid[row][col] = columnValues[row];
                        }
                    }
                }

                return grid;
            };

            // AudioContext Ïû¨ÏÇ¨Ïö© (Î©îÎ™®Î¶¨ ÎàÑÏàò Î∞©ÏßÄ)
            let audioContext = null;

            // ÏÇ¨Ïö¥Îìú Ïû¨ÏÉù Ìï®Ïàò
            const playSound = (frequencies) => {
                try {
                    if (!audioContext) {
                        audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    }
                    frequencies.forEach((freq, index) => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);

                        oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + index * 0.1);
                        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime + index * 0.1);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + index * 0.1 + 0.3);

                        oscillator.start(audioContext.currentTime + index * 0.1);
                        oscillator.stop(audioContext.currentTime + index * 0.1 + 0.3);
                    });
                } catch (e) {
                    console.log('Ïò§ÎîîÏò§ Ïû¨ÏÉù Î∂àÍ∞Ä');
                }
            };

            // ÌûåÌä∏ Ï∞æÍ∏∞ - Í∞ÄÎä•Ìïú Ï°∞Ìï© Ï∞æÍ∏∞
            const findHint = () => {
                if (!grid || grid.length === 0) return;

                // Í∞ÄÎ°ú Î∞©Ìñ• Í≤ÄÏÉâ
                for (let row = 0; row < 15; row++) {
                    for (let startCol = 0; startCol < 15; startCol++) {
                        if (grid[row][startCol] === null) continue;

                        let sum = 0;
                        const path = [];

                        for (let endCol = startCol; endCol < 15 && grid[row][endCol] !== null; endCol++) {
                            sum += grid[row][endCol];
                            path.push(`${row}-${endCol}`);

                            if (sum === 10 && path.length >= 2 && path.length <= 9) {
                                setHintCells(path);
                                return;
                            }
                            if (sum > 10) break;
                        }
                    }
                }

                // ÏÑ∏Î°ú Î∞©Ìñ• Í≤ÄÏÉâ
                for (let col = 0; col < 15; col++) {
                    for (let startRow = 0; startRow < 15; startRow++) {
                        if (grid[startRow][col] === null) continue;

                        let sum = 0;
                        const path = [];

                        for (let endRow = startRow; endRow < 15 && grid[endRow][col] !== null; endRow++) {
                            sum += grid[endRow][col];
                            path.push(`${endRow}-${col}`);

                            if (sum === 10 && path.length >= 2 && path.length <= 9) {
                                setHintCells(path);
                                return;
                            }
                            if (sum > 10) break;
                        }
                    }
                }
            };

            // Í≤åÏûÑ ÏãúÏûë/Ïû¨ÏãúÏûë
            const startGame = () => {
                setGrid(generateGrid());
                setScore(0);
                setSelectedCells([]);
                setDragState({ isDragging: false, direction: null, path: [] });
                setAnimations([]);
                setTimeLeft(120);
                setGameOver(false);
                setGameStarted(true);
                setLastMoveTime(Date.now());
                setHintCells([]);
                setCombo(0);
                setLastSuccessTime(null);
                setShowCombo(false);

                if (timerRef.current) clearInterval(timerRef.current);
                if (hintTimerRef.current) clearInterval(hintTimerRef.current);
            };

            // ÌÉÄÏù¥Î®∏ Í¥ÄÎ¶¨
            useEffect(() => {
                if (gameStarted && !gameOver && timeLeft > 0) {
                    timerRef.current = setInterval(() => {
                        setTimeLeft(prev => {
                            if (prev <= 1) {
                                setGameOver(true);
                                // Í≤åÏûÑ Ïò§Î≤Ñ ÏÇ¨Ïö¥Îìú (ÌïòÍ∞ï Î©úÎ°úÎîî)
                                playSound([392.00, 349.23, 293.66, 261.63]);
                                return 0;
                            }
                            return prev - 1;
                        });
                    }, 1000);
                } else if (timerRef.current) {
                    clearInterval(timerRef.current);
                }

                return () => {
                    if (timerRef.current) clearInterval(timerRef.current);
                };
            }, [gameStarted, gameOver, timeLeft]);

            // ÌûåÌä∏ ÌÉÄÏù¥Î®∏ Í¥ÄÎ¶¨ (15Ï¥àÎßàÎã§ Ï≤¥ÌÅ¨)
            useEffect(() => {
                if (gameStarted && !gameOver) {
                    hintTimerRef.current = setInterval(() => {
                        const now = Date.now();
                        if (now - lastMoveTime >= 15000) {
                            findHint();
                        }
                    }, 1000);
                } else if (hintTimerRef.current) {
                    clearInterval(hintTimerRef.current);
                }

                return () => {
                    if (hintTimerRef.current) clearInterval(hintTimerRef.current);
                };
            }, [gameStarted, gameOver, lastMoveTime, grid]);

            // Ïù∏Ï†ë ÌôïÏù∏
            const canConnect = (from, to, direction) => {
                if (!direction) return from.row === to.row || from.col === to.col;

                if (direction === 'horizontal' && from.row !== to.row) return false;
                if (direction === 'vertical' && from.col !== to.col) return false;

                if (from.row === to.row) {
                    const [minCol, maxCol] = [Math.min(from.col, to.col), Math.max(from.col, to.col)];
                    for (let col = minCol + 1; col < maxCol; col++) {
                        if (grid[from.row][col] !== null) return false;
                    }
                    return true;
                }

                if (from.col === to.col) {
                    const [minRow, maxRow] = [Math.min(from.row, to.row), Math.max(from.row, to.row)];
                    for (let row = minRow + 1; row < maxRow; row++) {
                        if (grid[row][from.col] !== null) return false;
                    }
                    return true;
                }

                return false;
            };

            // ÎìúÎûòÍ∑∏ ÏãúÏûë
            const handleDragStart = (row, col) => {
                if (grid[row][col] === null || gameOver || !gameStarted) return;

                setDragState({
                    isDragging: true,
                    direction: null,
                    path: [{ row, col }]
                });
                setSelectedCells([`${row}-${col}`]);
            };

            // ÎìúÎûòÍ∑∏ Ï§ë
            const handleDragMove = (row, col) => {
                if (!dragState.isDragging || grid[row][col] === null) return;

                const cellKey = `${row}-${col}`;
                if (selectedCells.includes(cellKey)) return;

                const newCell = { row, col };
                const lastCell = dragState.path[dragState.path.length - 1];

                let direction = dragState.direction;
                if (!direction && dragState.path.length === 1) {
                    if (lastCell.row === newCell.row) direction = 'horizontal';
                    else if (lastCell.col === newCell.col) direction = 'vertical';
                    else return;
                }

                if (canConnect(lastCell, newCell, direction)) {
                    setDragState({
                        ...dragState,
                        direction,
                        path: [...dragState.path, newCell]
                    });
                    setSelectedCells([...selectedCells, cellKey]);
                }
            };

            // ÎìúÎûòÍ∑∏ Ï¢ÖÎ£å
            const handleDragEnd = () => {
                if (!dragState.isDragging) return;

                const sum = dragState.path.reduce((acc, cell) => acc + (grid[cell.row][cell.col] || 0), 0);

                if (sum === 10 && dragState.path.length >= 2 && dragState.path.length <= 9) {
                    const cellKeys = dragState.path.map(cell => `${cell.row}-${cell.col}`);
                    setAnimations(cellKeys);

                    const length = dragState.path.length;
                    const now = Date.now();

                    // ÏΩ§Î≥¥ Ï≤¥ÌÅ¨ (15Ï¥à Ïù¥ÎÇ¥)
                    let currentCombo = 0;
                    let comboBonus = 0;
                    if (lastSuccessTime && now - lastSuccessTime <= 15000) {
                        currentCombo = combo + 1;
                        comboBonus = length * 5; // ÏÇ¨Í≥ºÎãπ +5Ï†ê
                        setCombo(currentCombo);
                        setShowCombo(true);
                        setTimeout(() => setShowCombo(false), 2000);
                        // ÏΩ§Î≥¥ ÏÇ¨Ïö¥Îìú (ÌôîÎ†§Ìïú 4Ïùå)
                        playSound([523.25, 659.25, 783.99, 1046.50]);
                    } else {
                        setCombo(0);
                        // ÏùºÎ∞ò ÏÑ±Í≥µ ÏÇ¨Ïö¥Îìú (Í∏∞Î≥∏ 3Ïùå)
                        playSound([523.25, 659.25, 783.99]);
                    }

                    setLastSuccessTime(now);
                    setLastMoveTime(now);
                    setHintCells([]); // ÌûåÌä∏ Ï†úÍ±∞

                    const baseScore = length * 10;
                    const lengthBonus = length >= 8 ? 50 : length >= 6 ? 30 : length >= 4 ? 10 : 0;
                    setScore(score + baseScore + lengthBonus + comboBonus);

                    setTimeout(() => {
                        const newGrid = grid.map(row => [...row]);
                        dragState.path.forEach(cell => {
                            newGrid[cell.row][cell.col] = null;
                        });
                        setGrid(newGrid);
                        setAnimations([]);
                    }, 800);
                }

                setDragState({ isDragging: false, direction: null, path: [] });
                setSelectedCells([]);
            };

            // ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨
            const handleTouchMove = (ev) => {
                ev.preventDefault();
                const touch = ev.touches[0];
                const element = document.elementFromPoint(touch.clientX, touch.clientY);
                if (element?.dataset.row) {
                    handleDragMove(parseInt(element.dataset.row), parseInt(element.dataset.col));
                }
            };

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            return e('div', { className: "game-container" },
                e('div', { className: "game-card" },
                    e('div', { className: "game-header" },
                        e('h1', { className: "game-title" }, "üçé ÏÇ¨Í≥º ÏàòÌôï Í≤åÏûÑ"),
                        e('p', { className: "game-subtitle" }, "ÏÇ¨Í≥ºÎ•º ÎìúÎûòÍ∑∏Ìï¥ÏÑú Ìï©Ïù¥ 10Ïù¥ ÎêòÎèÑÎ°ù ÎßåÎìúÏÑ∏Ïöî!")
                    ),

                    !gameStarted ? e('div', { className: "start-screen" },
                        e('div', { className: "start-icon animate-bounce" }, "üçé"),
                        e('h2', { className: "start-title" }, "ÏÇ¨Í≥º ÏàòÌôï Í≤åÏûÑÏùÑ ÏãúÏûëÌïòÏãúÍ≤†ÏäµÎãàÍπå?"),
                        e('p', { className: "start-desc" }, "ÏÇ¨Í≥º Í≥ºÏàòÏõêÏóêÏÑú 2Î∂Ñ ÎèôÏïà ÏàòÌôïÌïòÏÑ∏Ïöî!"),
                        e('p', { className: "start-hint" }, "ÏÇ¨Í≥ºÎ•º Í∞ÄÎ°ú ÎòêÎäî ÏÑ∏Î°úÎ°ú Ïó∞Í≤∞Ìï† Ïàò ÏûàÏäµÎãàÎã§"),
                        e('p', { className: "start-hint" }, "2Í∞úÎ∂ÄÌÑ∞ 9Í∞úÍπåÏßÄ Ïó∞Í≤∞Ìï¥ÏÑú Ìï©Ïù¥ 10Ïù¥ ÎêòÎ©¥ ÏàòÌôï!"),
                        e('p', { className: "start-example" }, "Ïòà: 7+3, 1+2+3+4, 1+1+1+1+1+1+1+1+2"),
                        e('button', {
                            onClick: startGame,
                            className: "btn-start"
                        }, "‚ñ∂Ô∏è ÏàòÌôï ÏãúÏûë"),
                        e('div', { className: "score-info-box" },
                            e('h3', { className: "score-info-title" }, "üçé ÏàòÌôï Ï†êÏàò:"),
                            e('ul', { className: "score-info-list" },
                                e('li', null, "‚Ä¢ Í∏∞Î≥∏: ÏÇ¨Í≥º Í∞úÏàò √ó 10Ï†ê"),
                                e('li', null, "‚Ä¢ 4Í∞ú Ïù¥ÏÉÅ: +10Ï†ê Î≥¥ÎÑàÏä§"),
                                e('li', null, "‚Ä¢ 6Í∞ú Ïù¥ÏÉÅ: +30Ï†ê Î≥¥ÎÑàÏä§"),
                                e('li', null, "‚Ä¢ 8Í∞ú Ïù¥ÏÉÅ: +50Ï†ê ÎåÄÎ∞ï Î≥¥ÎÑàÏä§!")
                            )
                        )
                    ) : e('div', null,
                        e('div', { className: "status-bar" },
                            e('div', { className: "status-left" },
                                e('div', { className: "score-badge" },
                                    e('span', { className: "score-badge-icon" }, "üß∫"),
                                    e('span', { className: "score-badge-text" }, score + "Ï†ê")
                                ),
                                combo > 0 && e('div', { className: "combo-badge" },
                                    e('span', { className: "combo-badge-icon" }, "üî•"),
                                    e('span', { className: "combo-badge-text" }, combo + " COMBO")
                                )
                            ),

                            e('div', {
                                className: "timer-badge " + (timeLeft < 30 ? 'warning' : 'normal')
                            },
                                e('span', { className: "timer-badge-icon" }, "‚è±Ô∏è"),
                                e('span', {
                                    className: "timer-badge-text " + (timeLeft < 30 ? 'warning' : 'normal')
                                }, formatTime(timeLeft))
                            ),

                            e('button', {
                                onClick: startGame,
                                className: "btn-restart"
                            }, "üîÑ ÏÉà ÏàòÌôï")
                        ),

                        e('div', {
                            className: "game-grid",
                            onMouseUp: handleDragEnd,
                            onMouseLeave: handleDragEnd
                        },
                            grid.map((row, rowIndex) =>
                                row.map((value, colIndex) => {
                                    const cellKey = `${rowIndex}-${colIndex}`;
                                    const isSelected = selectedCells.includes(cellKey);
                                    const isAnimating = animations.includes(cellKey);
                                    const isPath = dragState.path.some(p => p.row === rowIndex && p.col === colIndex);
                                    const isHint = hintCells.includes(cellKey);

                                    let cellClass = "grid-cell";
                                    if (value === null) cellClass += " empty";
                                    if (isSelected) cellClass += " selected";
                                    if (isAnimating) cellClass += " apple-fall animating";
                                    if (isHint) cellClass += " hint animate-pulse";

                                    return e('div', {
                                        key: cellKey,
                                        'data-row': rowIndex,
                                        'data-col': colIndex,
                                        className: cellClass,
                                        onMouseDown: () => handleDragStart(rowIndex, colIndex),
                                        onMouseEnter: () => handleDragMove(rowIndex, colIndex),
                                        onTouchStart: (ev) => {
                                            ev.preventDefault();
                                            handleDragStart(rowIndex, colIndex);
                                        },
                                        onTouchMove: handleTouchMove,
                                        onTouchEnd: (ev) => {
                                            ev.preventDefault();
                                            handleDragEnd();
                                        }
                                    },
                                        value !== null && e('div', { className: "apple-container" },
                                            e('span', {
                                                className: "apple-emoji" + (isSelected ? " bright" : "")
                                            }, "üçé"),
                                            e('span', {
                                                className: "apple-number" + (isAnimating ? " hidden" : "")
                                            }, !isAnimating && value),
                                            isPath && !isAnimating && e('div', null,
                                                e('div', { className: "path-indicator" },
                                                    e('span', {
                                                        className: "path-indicator-icon animate-pulse"
                                                    }, "‚ö°")
                                                ),
                                                dragState.direction === 'horizontal' && dragState.path.length > 1 &&
                                                    e('div', { className: "line-horizontal" },
                                                        e('div', { className: "line-horizontal-inner" })
                                                    ),
                                                dragState.direction === 'vertical' && dragState.path.length > 1 &&
                                                    e('div', { className: "line-vertical" },
                                                        e('div', { className: "line-vertical-inner" })
                                                    )
                                            )
                                        )
                                    );
                                })
                            ),

                            showCombo && e('div', { className: "combo-popup" },
                                e('div', {
                                    className: "combo-popup-inner animate-bounce"
                                }, "üî• " + (combo + 1) + " COMBO! üî•")
                            ),

                            gameOver && e('div', { className: "game-over-overlay" },
                                e('div', { className: "game-over-box" },
                                    e('div', { className: "game-over-icon" }, "üçé"),
                                    e('h2', { className: "game-over-title" }, "ÏàòÌôï ÏôÑÎ£å!"),
                                    e('p', { className: "game-over-score" },
                                        "Ï¥ù ÏàòÌôïÎüâ: ",
                                        e('span', { className: "game-over-score-value" }, score + "Ï†ê")
                                    ),
                                    e('button', {
                                        onClick: startGame,
                                        className: "btn-retry"
                                    }, "Îã§Ïãú ÏàòÌôïÌïòÍ∏∞")
                                )
                            )
                        ),

                        e('div', { className: "footer-tips" },
                            e('p', null, "üçé ÌåÅ: ÏÇ¨Í≥ºÎ•º ÏàòÌôïÌïòÎ†§Î©¥ Ìï©Ïù¥ 10Ïù¥ ÎêòÎèÑÎ°ù Ïó∞Í≤∞ÌïòÏÑ∏Ïöî!"),
                            e('p', null, "ÎßéÏùÄ ÏÇ¨Í≥ºÎ•º ÌïúÎ≤àÏóê ÏàòÌôïÌï†ÏàòÎ°ù Î≥¥ÎÑàÏä§ Ï†êÏàò!")
                        ),

                        e('button', {
                            onClick: () => {
                                setGameStarted(false);
                                if (timerRef.current) clearInterval(timerRef.current);
                                if (hintTimerRef.current) clearInterval(hintTimerRef.current);
                            },
                            className: "btn-home",
                            title: "ÏãúÏûë Î©îÎâ¥Î°ú"
                        }, "üè†")
                    )
                )
            );
        }

        ReactDOM.render(React.createElement(NumberTenGame), document.getElementById('root'));
    </script>
</body>
</html>
