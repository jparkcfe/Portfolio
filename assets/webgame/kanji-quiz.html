<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ÏùºÎ≥∏Ïñ¥ ÌïúÏûê ÌïôÏäµ ÌÄ¥Ï¶à</title>

    <!-- PWA Î©îÌÉÄ ÌÉúÍ∑∏ -->
    <meta name="description" content="ÏùºÎ≥∏Ïñ¥ ÌïúÏûêÎ•º Ïû¨ÎØ∏ÏûàÍ≤å ÌïôÏäµÌï† Ïàò ÏûàÎäî ÌÄ¥Ï¶à Í≤åÏûÑ">
    <meta name="theme-color" content="#8B5CF6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ÌïúÏûêÌÄ¥Ï¶à">
    <meta name="mobile-web-app-capable" content="yes">

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;600;700&display=swap');

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Noto Sans KR', 'Noto Sans JP', sans-serif;
            -webkit-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
            min-height: 100vh;
            background: linear-gradient(to bottom right, #a78bfa, #ec4899, #ef4444);
        }

        .container {
            min-height: 100vh;
            padding: 16px;
        }

        .max-w-container {
            max-width: 672px;
            margin: 0 auto;
        }

        /* Í≤åÏûÑ Ïò§Î≤Ñ ÌôîÎ©¥ */
        .game-over-screen {
            min-height: 100vh;
            background: linear-gradient(to bottom right, #a78bfa, #ec4899, #ef4444);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        .game-over-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            padding: 24px;
            max-width: 448px;
            width: 100%;
            text-align: center;
        }

        .emoji-large {
            font-size: 60px;
            margin-bottom: 16px;
        }

        .title-large {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .stats-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 24px;
        }

        .stat-text {
            font-size: 18px;
            color: #4b5563;
        }

        .stat-text-sm {
            font-size: 14px;
            color: #4b5563;
        }

        .stat-text-xs {
            font-size: 12px;
            color: #6b7280;
        }

        .highlight-purple {
            font-weight: 700;
            color: #9333ea;
        }

        .btn-gradient {
            background: linear-gradient(to right, #8b5cf6, #ec4899);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 44px;
            min-width: 44px;
        }

        .btn-gradient:hover {
            background: linear-gradient(to right, #7c3aed, #db2777);
        }

        .btn-gradient:active {
            transform: scale(0.95);
        }

        /* Î°úÎî© ÌôîÎ©¥ */
        .loading-screen {
            min-height: 100vh;
            background: linear-gradient(to bottom right, #a78bfa, #ec4899, #ef4444);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loading-text {
            color: white;
            font-size: 20px;
        }

        /* ÏÉÅÎã® Ï†ïÎ≥¥ Î∞î */
        .info-bar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(4px);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            color: white;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .info-group {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .info-icon {
            font-size: 20px;
        }

        .info-value {
            font-weight: 600;
        }

        .lives-container {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .life-icon {
            font-size: 24px;
        }

        .life-icon.inactive {
            opacity: 0.3;
        }

        /* Ïª®Ìä∏Î°§ Î≤ÑÌäºÎì§ */
        .controls-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            font-size: 14px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 4px 12px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
            min-height: 44px;
            min-width: 44px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .control-select {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 4px 12px;
            border-radius: 8px;
            border: none;
            min-height: 44px;
        }

        .control-select option {
            color: #1f2937;
        }

        .control-input {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 4px 12px;
            border-radius: 8px;
            border: none;
            width: 80px;
            min-height: 44px;
        }

        .control-info {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            font-size: 12px;
            opacity: 0.7;
        }

        /* ÌÄ¥Ï¶à Ïπ¥Îìú */
        .quiz-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            padding: 32px;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .kanji-display {
            background: linear-gradient(to right, #f3e8ff, #fce7f3);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 16px;
        }

        .kanji-char {
            font-size: 60px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .question-text {
            font-size: 18px;
            color: #4b5563;
        }

        .question-info {
            font-size: 14px;
            color: #6b7280;
        }

        /* ÎãµÎ≥Ä Î≤ÑÌäºÎì§ */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }

        .option-btn {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
            font-weight: 500;
            transition: all 0.2s;
            min-height: 60px;
            background: white;
            cursor: pointer;
        }

        .option-btn:hover:not(:disabled) {
            border-color: #c4b5fd;
            background: #faf5ff;
        }

        .option-btn:active:not(:disabled) {
            transform: scale(0.95);
        }

        .option-btn.correct {
            border-color: #4ade80;
            background: #f0fdf4;
            color: #15803d;
        }

        .option-btn.wrong {
            border-color: #f87171;
            background: #fef2f2;
            color: #b91c1c;
        }

        .option-btn.disabled {
            border-color: #e5e7eb;
            background: #f9fafb;
            color: #6b7280;
        }

        /* Í≤∞Í≥º ÌëúÏãú */
        .result-container {
            text-align: center;
        }

        .result-text {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .result-text.correct {
            color: #16a34a;
        }

        .result-text.wrong {
            color: #dc2626;
        }

        .detail-box {
            background: #eff6ff;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
        }

        .detail-kanji {
            font-size: 24px;
        }

        .answer-highlight {
            color: #dc2626;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const { useState, useEffect, createElement: e } = React;

        function KanjiQuizGame() {
            const kanjiData = [
                // Î†àÎ≤® 1 - Í∏∞Ï¥à ÌïúÏûê (30Í∞ú)
                { kanji: 'Ê∞¥', reading: '„Åø„Åö', meaning: 'Î¨º', kunReading: '„Åø„Åö (ÎØ∏Ï¶à)', onReading: '„Çπ„Ç§ (Ïä§Ïù¥)', level: 1 },
                { kanji: 'ÁÅ´', reading: '„Å≤', meaning: 'Î∂à', kunReading: '„Å≤ (Ìûà)', onReading: '„Ç´ (Ïπ¥)', level: 1 },
                { kanji: 'Êú®', reading: '„Åç', meaning: 'ÎÇòÎ¨¥', kunReading: '„Åç (ÌÇ§)', onReading: '„É¢„ÇØ„Éª„Éú„ÇØ (Î™®Ïø†¬∑Î≥¥Ïø†)', level: 1 },
                { kanji: 'Èáë', reading: '„Åç„Çì', meaning: 'Í∏à', kunReading: '„Åã„Å≠ (Ïπ¥ÎÑ§)', onReading: '„Ç≠„É≥ (ÌÇ®)', level: 1 },
                { kanji: 'Âúü', reading: '„Å§„Å°', meaning: 'Ìùô', kunReading: '„Å§„Å° (Ï∏†Ïπò)', onReading: '„Éâ„Éª„Éà (ÎèÑ¬∑ÌÜ†)', level: 1 },
                { kanji: 'Êó•', reading: '„Å≤', meaning: 'ÎÇ†/Ìï¥', kunReading: '„Å≤„Éª„Åã (Ìûà¬∑Ïπ¥)', onReading: '„Éã„ÉÅ„Éª„Ç∏„ÉÑ (ÎãàÏπò¬∑ÏßÄÏ∏†)', level: 1 },
                { kanji: 'Êúà', reading: '„Å§„Åç', meaning: 'Îã¨', kunReading: '„Å§„Åç (Ï∏†ÌÇ§)', onReading: '„Ç≤„ÉÑ„Éª„Ç¨„ÉÑ (Í≤åÏ∏†¬∑Í∞ÄÏ∏†)', level: 1 },
                { kanji: 'Â±±', reading: '„ÇÑ„Åæ', meaning: 'ÏÇ∞', kunReading: '„ÇÑ„Åæ (ÏïºÎßà)', onReading: '„Çµ„É≥ (ÏÇ∞)', level: 1 },
                { kanji: 'Â∑ù', reading: '„Åã„Çè', meaning: 'Í∞ï', kunReading: '„Åã„Çè (Ïπ¥ÏôÄ)', onReading: '„Çª„É≥ (ÏÑº)', level: 1 },
                { kanji: '‰∫∫', reading: '„Å≤„Å®', meaning: 'ÏÇ¨Îûå', kunReading: '„Å≤„Å® (ÌûàÌÜ†)', onReading: '„Ç∏„É≥„Éª„Éã„É≥ (ÏßÑ¬∑Îãå)', level: 1 },
                { kanji: 'Â§ß', reading: '„Åä„Åä', meaning: 'ÌÅ¨Îã§', kunReading: '„Åä„Åä (Ïò§Ïò§)', onReading: '„ÉÄ„Ç§„Éª„Çø„Ç§ (Îã§Ïù¥¬∑ÌÉÄÏù¥)', level: 1 },
                { kanji: 'Â∞è', reading: '„Å°„ÅÑ', meaning: 'ÏûëÎã§', kunReading: '„Å°„ÅÑ„Éª„Åì (ÏπòÏù¥¬∑ÏΩî)', onReading: '„Ç∑„Éß„Ç¶ (Ïáº)', level: 1 },
                { kanji: '‰∏ä', reading: '„ÅÜ„Åà', meaning: 'ÏúÑ', kunReading: '„ÅÜ„Åà„Éª„Åã„Åø (Ïö∞Ïóê¬∑Ïπ¥ÎØ∏)', onReading: '„Ç∏„Éß„Ç¶ (Ï°∞)', level: 1 },
                { kanji: '‰∏ã', reading: '„Åó„Åü', meaning: 'ÏïÑÎûò', kunReading: '„Åó„Åü„Éª„ÇÇ„Å® (ÏãúÌÉÄ¬∑Î™®ÌÜ†)', onReading: '„Ç´„Éª„Ç≤ (Ïπ¥¬∑Í≤å)', level: 1 },
                { kanji: '‰∏≠', reading: '„Å™„Åã', meaning: 'Í∞ÄÏö¥Îç∞', kunReading: '„Å™„Åã (ÎÇòÏπ¥)', onReading: '„ÉÅ„É•„Ç¶ (Ï∏Ñ)', level: 1 },
                { kanji: 'Âè≥', reading: '„Åø„Åé', meaning: 'Ïò§Î•∏Ï™Ω', kunReading: '„Åø„Åé (ÎØ∏Í∏∞)', onReading: '„Ç¶„Éª„É¶„Ç¶ (Ïö∞¬∑Ïú†)', level: 1 },
                { kanji: 'Â∑¶', reading: '„Å≤„Å†„Çä', meaning: 'ÏôºÏ™Ω', kunReading: '„Å≤„Å†„Çä (ÌûàÎã§Î¶¨)', onReading: '„Çµ (ÏÇ¨)', level: 1 },
                { kanji: 'Êâã', reading: '„Å¶', meaning: 'ÏÜê', kunReading: '„Å¶ (ÌÖå)', onReading: '„Ç∑„É• (Ïäà)', level: 1 },
                { kanji: 'Ë∂≥', reading: '„ÅÇ„Åó', meaning: 'Î∞ú', kunReading: '„ÅÇ„Åó (ÏïÑÏãú)', onReading: '„ÇΩ„ÇØ (ÏÜåÏø†)', level: 1 },
                { kanji: 'ÁõÆ', reading: '„ÇÅ', meaning: 'Îàà', kunReading: '„ÇÅ (Î©î)', onReading: '„É¢„ÇØ„Éª„Éú„ÇØ (Î™®Ïø†¬∑Î≥¥Ïø†)', level: 1 },
                { kanji: 'Âè£', reading: '„Åè„Å°', meaning: 'ÏûÖ', kunReading: '„Åè„Å° (Ïø†Ïπò)', onReading: '„Ç≥„Ç¶„Éª„ÇØ (ÏΩî¬∑Ïø†)', level: 1 },
                { kanji: 'ËÄ≥', reading: '„Åø„Åø', meaning: 'Í∑Ä', kunReading: '„Åø„Åø (ÎØ∏ÎØ∏)', onReading: '„Ç∏ (ÏßÄ)', level: 1 },
                { kanji: 'ÂøÉ', reading: '„Åì„Åì„Çç', meaning: 'ÎßàÏùå', kunReading: '„Åì„Åì„Çç (ÏΩîÏΩîÎ°ú)', onReading: '„Ç∑„É≥ (Ïã†)', level: 1 },
                { kanji: 'Êú¨', reading: '„Åª„Çì', meaning: 'Ï±Ö', kunReading: '„ÇÇ„Å® (Î™®ÌÜ†)', onReading: '„Éõ„É≥ (Ìòº)', level: 1 },
                { kanji: 'Â≠ó', reading: '„Åò', meaning: 'Í∏ÄÏûê', kunReading: '„ÅÇ„Åñ (ÏïÑÏûê)', onReading: '„Ç∏ (ÏßÄ)', level: 1 },
                { kanji: 'Â§©', reading: '„Å¶„Çì', meaning: 'ÌïòÎäò', kunReading: '„ÅÇ„Åæ„Éª„ÅÇ„ÇÅ (ÏïÑÎßà¬∑ÏïÑÎ©î)', onReading: '„ÉÜ„É≥ (ÌÖê)', level: 1 },
                { kanji: 'Âú∞', reading: '„Å°', meaning: 'ÎïÖ', kunReading: '„Å° (Ïπò)', onReading: '„ÉÅ„Éª„Ç∏ (Ïπò¬∑ÏßÄ)', level: 1 },
                { kanji: 'ÁôΩ', reading: '„Åó„Çç', meaning: 'ÌïòÏñóÎã§', kunReading: '„Åó„Çç (ÏãúÎ°ú)', onReading: '„Éè„ÇØ„Éª„Éì„É£„ÇØ (ÌïòÏø†¬∑Î±åÏø†)', level: 1 },
                { kanji: 'Èªí', reading: '„Åè„Çç', meaning: 'Í≤ÄÎã§', kunReading: '„Åè„Çç (Ïø†Î°ú)', onReading: '„Ç≥„ÇØ (ÏΩîÏø†)', level: 1 },
                { kanji: 'Ëµ§', reading: '„ÅÇ„Åã', meaning: 'Îπ®Í∞õÎã§', kunReading: '„ÅÇ„Åã (ÏïÑÏπ¥)', onReading: '„Çª„Ç≠„Éª„Ç∑„É£„ÇØ (ÏÑ∏ÌÇ§¬∑ÏÉ§Ïø†)', level: 1 },
                // Î†àÎ≤® 2 - ÏùºÏÉÅ ÌïúÏûê (40Í∞ú)
                { kanji: 'Â≠¶', reading: '„Åå„Åè', meaning: 'Î∞∞Ïö∞Îã§', kunReading: '„Åæ„Å™ (ÎßàÎÇò)', onReading: '„Ç¨„ÇØ (Í∞ÄÏø†)', level: 2 },
                { kanji: 'Ê†°', reading: '„Åì„ÅÜ', meaning: 'ÌïôÍµê', kunReading: 'ÏóÜÏùå', onReading: '„Ç≥„Ç¶ (ÏΩî)', level: 2 },
                { kanji: 'Ëªä', reading: '„Åè„Çã„Åæ', meaning: 'ÏûêÎèôÏ∞®', kunReading: '„Åè„Çã„Åæ (Ïø†Î£®Îßà)', onReading: '„Ç∑„É£ (ÏÉ§)', level: 2 },
                { kanji: 'ÂÆ∂', reading: '„ÅÑ„Åà', meaning: 'Ïßë', kunReading: '„ÅÑ„Åà„Éª„ÅÜ„Å° (Ïù¥Ïóê¬∑Ïö∞Ïπò)', onReading: '„Ç´„Éª„Ç± (Ïπ¥¬∑ÏºÄ)', level: 2 },
                { kanji: 'Â∫ó', reading: '„Åø„Åõ', meaning: 'Í∞ÄÍ≤å', kunReading: '„Åø„Åõ (ÎØ∏ÏÑ∏)', onReading: '„ÉÜ„É≥ (ÌÖê)', level: 2 },
                { kanji: 'ÊôÇ', reading: '„Å®„Åç', meaning: 'ÏãúÍ∞Ñ', kunReading: '„Å®„Åç (ÌÜ†ÌÇ§)', onReading: '„Ç∏ (ÏßÄ)', level: 2 },
                { kanji: 'ÂàÜ', reading: '„Åµ„Çì', meaning: 'Î∂Ñ', kunReading: '„Çè (ÏôÄ)', onReading: '„Éñ„É≥„Éª„Éï„É≥ (Î∂Ñ¬∑Ìõà)', level: 2 },
                { kanji: 'Âπ¥', reading: '„Å®„Åó', meaning: 'Ìï¥/ÎÖÑ', kunReading: '„Å®„Åó (ÌÜ†Ïãú)', onReading: '„Éç„É≥ (ÎÑ®)', level: 2 },
                { kanji: '‰ªä', reading: '„ÅÑ„Åæ', meaning: 'ÏßÄÍ∏à', kunReading: '„ÅÑ„Åæ (Ïù¥Îßà)', onReading: '„Ç≥„É≥„Éª„Ç≠„É≥ (ÏΩò¬∑ÌÇ®)', level: 2 },
                { kanji: 'ÂÖà', reading: '„Åï„Åç', meaning: 'Î®ºÏ†Ä', kunReading: '„Åï„Åç (ÏÇ¨ÌÇ§)', onReading: '„Çª„É≥ (ÏÑº)', level: 2 },
                { kanji: 'Áîü', reading: '„ÅÜ', meaning: 'ÏÇ¥Îã§', kunReading: '„ÅÜ„Éª„ÅÑ (Ïö∞¬∑Ïù¥)', onReading: '„Çª„Ç§„Éª„Ç∑„Éß„Ç¶ (ÏÑ∏Ïù¥¬∑Ïáº)', level: 2 },
                { kanji: 'Áî∑', reading: '„Åä„Å®„Åì', meaning: 'ÎÇ®Ïûê', kunReading: '„Åä„Å®„Åì (Ïò§ÌÜ†ÏΩî)', onReading: '„ÉÄ„É≥„Éª„Éä„É≥ (Îã®¬∑ÎÇú)', level: 2 },
                { kanji: 'Â•≥', reading: '„Åä„Çì„Å™', meaning: 'Ïó¨Ïûê', kunReading: '„Åä„Çì„Å™ (Ïò®ÎÇò)', onReading: '„Ç∏„Éß„Éª„Éã„Éß (Ï°∞¬∑Îá®)', level: 2 },
                { kanji: 'Â≠ê', reading: '„Åì', meaning: 'ÏïÑÏù¥', kunReading: '„Åì (ÏΩî)', onReading: '„Ç∑„Éª„Çπ (Ïãú¬∑Ïä§)', level: 2 },
                { kanji: 'ÊØç', reading: '„ÅØ„ÅØ', meaning: 'Ïñ¥Î®∏Îãà', kunReading: '„ÅØ„ÅØ (ÌïòÌïò)', onReading: '„Éú (Î≥¥)', level: 2 },
                { kanji: 'Áà∂', reading: '„Å°„Å°', meaning: 'ÏïÑÎ≤ÑÏßÄ', kunReading: '„Å°„Å° (ÏπòÏπò)', onReading: '„Éï (ÌõÑ)', level: 2 },
                { kanji: 'È£ü', reading: '„Åü', meaning: 'Î®πÎã§', kunReading: '„Åü (ÌÉÄ)', onReading: '„Ç∑„Éß„ÇØ„Éª„Ç∏„Ç≠ (ÏáºÏø†¬∑ÏßÄÌÇ§)', level: 2 },
                { kanji: 'È£≤', reading: '„ÅÆ', meaning: 'ÎßàÏãúÎã§', kunReading: '„ÅÆ (ÎÖ∏)', onReading: '„Ç§„É≥ (Ïù∏)', level: 2 },
                { kanji: 'Ë¶ã', reading: '„Åø', meaning: 'Î≥¥Îã§', kunReading: '„Åø (ÎØ∏)', onReading: '„Ç±„É≥ (ÏºÑ)', level: 2 },
                { kanji: 'ËÅû', reading: '„Åç', meaning: 'Îì£Îã§', kunReading: '„Åç (ÌÇ§)', onReading: '„Éñ„É≥ (Î∂Ñ)', level: 2 },
                { kanji: 'Ë®Ä', reading: '„ÅÑ', meaning: 'ÎßêÌïòÎã§', kunReading: '„ÅÑ (Ïù¥)', onReading: '„Ç≤„É≥„Éª„Ç¥„É≥ (Í≤ê¬∑Í≥§)', level: 2 },
                { kanji: 'Ë©±', reading: '„ÅØ„Å™', meaning: 'Ïù¥ÏïºÍ∏∞ÌïòÎã§', kunReading: '„ÅØ„Å™ (ÌïòÎÇò)', onReading: '„ÉØ (ÏôÄ)', level: 2 },
                { kanji: 'Ë™≠', reading: '„Çà', meaning: 'ÏùΩÎã§', kunReading: '„Çà (Ïöî)', onReading: '„Éâ„ÇØ„Éª„Éà„ÇØ (ÎèÑÏø†¬∑ÌÜ†Ïø†)', level: 2 },
                { kanji: 'Êõ∏', reading: '„Åã', meaning: 'Ïì∞Îã§', kunReading: '„Åã (Ïπ¥)', onReading: '„Ç∑„Éß (Ïáº)', level: 2 },
                { kanji: 'Êù•', reading: '„Åè', meaning: 'Ïò§Îã§', kunReading: '„Åè (Ïø†)', onReading: '„É©„Ç§ (ÎùºÏù¥)', level: 2 },
                { kanji: 'Ë°å', reading: '„ÅÑ', meaning: 'Í∞ÄÎã§', kunReading: '„ÅÑ„Éª„ÇÜ (Ïù¥¬∑Ïú†)', onReading: '„Ç≥„Ç¶„Éª„ÇÆ„Éß„Ç¶ (ÏΩî¬∑Íµê)', level: 2 },
                { kanji: 'Â∏∞', reading: '„Åã„Åà', meaning: 'ÎèåÏïÑÍ∞ÄÎã§', kunReading: '„Åã„Åà (Ïπ¥Ïóê)', onReading: '„Ç≠ (ÌÇ§)', level: 2 },
                { kanji: 'Ë≤∑', reading: '„Åã', meaning: 'ÏÇ¨Îã§', kunReading: '„Åã (Ïπ¥)', onReading: '„Éê„Ç§ (Î∞îÏù¥)', level: 2 },
                { kanji: 'Â£≤', reading: '„ÅÜ', meaning: 'ÌåîÎã§', kunReading: '„ÅÜ (Ïö∞)', onReading: '„Éê„Ç§ (Î∞îÏù¥)', level: 2 },
                { kanji: '‰Ωú', reading: '„Å§„Åè', meaning: 'ÎßåÎì§Îã§', kunReading: '„Å§„Åè (Ï∏†Ïø†)', onReading: '„Çµ„ÇØ„Éª„Çµ (ÏÇ¨Ïø†¬∑ÏÇ¨)', level: 2 },
                { kanji: '‰Ωø', reading: '„Å§„Åã', meaning: 'ÏÇ¨Ïö©ÌïòÎã§', kunReading: '„Å§„Åã (Ï∏†Ïπ¥)', onReading: '„Ç∑ (Ïãú)', level: 2 },
                { kanji: 'Á´ã', reading: '„Åü', meaning: 'ÏÑúÎã§', kunReading: '„Åü (ÌÉÄ)', onReading: '„É™„ÉÑ„Éª„É™„É•„Ç¶ (Î¶¨Ï∏†¬∑Î•ò)', level: 2 },
                { kanji: 'ÂÖ•', reading: '„ÅØ„ÅÑ', meaning: 'Îì§Ïñ¥Í∞ÄÎã§', kunReading: '„ÅØ„ÅÑ„Éª„ÅÑ (ÌïòÏù¥¬∑Ïù¥)', onReading: '„Éã„É•„Ç¶ (Îâ¥)', level: 2 },
                { kanji: 'Âá∫', reading: '„Åß', meaning: 'ÎÇòÍ∞ÄÎã§', kunReading: '„Åß (Îç∞)', onReading: '„Ç∑„É•„ÉÑ„Éª„Çπ„Ç§ (ÏäàÏ∏†¬∑Ïä§Ïù¥)', level: 2 },
                { kanji: 'Âàá', reading: '„Åç', meaning: 'ÏûêÎ•¥Îã§', kunReading: '„Åç (ÌÇ§)', onReading: '„Çª„ÉÑ„Éª„Çµ„Ç§ (ÏÑ∏Ï∏†¬∑ÏÇ¨Ïù¥)', level: 2 },
                { kanji: 'ÊåÅ', reading: '„ÇÇ', meaning: 'Í∞ÄÏßÄÎã§', kunReading: '„ÇÇ (Î™®)', onReading: '„Ç∏ (ÏßÄ)', level: 2 },
                { kanji: 'Áü•', reading: '„Åó', meaning: 'ÏïåÎã§', kunReading: '„Åó (Ïãú)', onReading: '„ÉÅ (Ïπò)', level: 2 },
                { kanji: 'ÊÄù', reading: '„Åä„ÇÇ', meaning: 'ÏÉùÍ∞ÅÌïòÎã§', kunReading: '„Åä„ÇÇ (Ïò§Î™®)', onReading: '„Ç∑ (Ïãú)', level: 2 },
                { kanji: 'Â•Ω', reading: '„Åô', meaning: 'Ï¢ãÏïÑÌïòÎã§', kunReading: '„Åô„Éª„Åì„ÅÆ (Ïä§¬∑ÏΩîÎÖ∏)', onReading: '„Ç≥„Ç¶ (ÏΩî)', level: 2 },
                { kanji: 'È´ò', reading: '„Åü„Åã', meaning: 'ÎÜíÎã§', kunReading: '„Åü„Åã (ÌÉÄÏπ¥)', onReading: '„Ç≥„Ç¶ (ÏΩî)', level: 2 },
                // Î†àÎ≤® 3 - Ï§ëÍ∏â ÌïúÏûê (20Í∞ú)
                { kanji: 'ËÄÉ', reading: '„Åã„Çì„Åå', meaning: 'ÏÉùÍ∞ÅÌïòÎã§', kunReading: '„Åã„Çì„Åå (Ïπ∏Í∞Ä)', onReading: '„Ç≥„Ç¶ (ÏΩî)', level: 3 },
                { kanji: 'ÊÑü', reading: '„Åã„Çì', meaning: 'ÎäêÎÅºÎã§', kunReading: 'ÏóÜÏùå', onReading: '„Ç´„É≥ (Ïπ∏)', level: 3 },
                { kanji: 'ÊÑè', reading: '„ÅÑ', meaning: 'Îúª', kunReading: 'ÏóÜÏùå', onReading: '„Ç§ (Ïù¥)', level: 3 },
                { kanji: 'Âë≥', reading: '„ÅÇ„Åò', meaning: 'Îßõ', kunReading: '„ÅÇ„Åò (ÏïÑÏßÄ)', onReading: '„Éü (ÎØ∏)', level: 3 },
                { kanji: 'ÁêÜ', reading: '„Çä', meaning: 'Ïù¥Ïπò', kunReading: 'ÏóÜÏùå', onReading: '„É™ (Î¶¨)', level: 3 },
                { kanji: 'Ëß£', reading: '„Å®', meaning: 'ÌíÄÎã§', kunReading: '„Å® (ÌÜ†)', onReading: '„Ç´„Ç§„Éª„Ç≤ (Ïπ¥Ïù¥¬∑Í≤å)', level: 3 },
                { kanji: 'Ë™¨', reading: '„Åõ„Å§', meaning: 'ÏÑ§Î™Ö', kunReading: 'ÏóÜÏùå', onReading: '„Çª„ÉÑ„Éª„Çº„Ç§ (ÏÑ∏Ï∏†¬∑Ï†úÏù¥)', level: 3 },
                { kanji: 'Êòé', reading: '„ÅÇ„Åã', meaning: 'Î∞ùÎã§', kunReading: '„ÅÇ„Åã (ÏïÑÏπ¥)', onReading: '„É°„Ç§„Éª„Éü„Éß„Ç¶ (Î©îÏù¥¬∑Î¨ò)', level: 3 },
                { kanji: 'Êöó', reading: '„Åè„Çâ', meaning: 'Ïñ¥Îë°Îã§', kunReading: '„Åè„Çâ (Ïø†Îùº)', onReading: '„Ç¢„É≥ (Ïïà)', level: 3 },
                { kanji: 'Èáç', reading: '„Åä„ÇÇ', meaning: 'Î¨¥Í≤ÅÎã§', kunReading: '„Åä„ÇÇ (Ïò§Î™®)', onReading: '„Ç∏„É•„Ç¶„Éª„ÉÅ„Éß„Ç¶ (Ï£º¬∑Ï¥à)', level: 3 },
                { kanji: 'ËªΩ', reading: '„Åã„Çã', meaning: 'Í∞ÄÎ≥çÎã§', kunReading: '„Åã„Çã (Ïπ¥Î£®)', onReading: '„Ç±„Ç§ (ÏºÄÏù¥)', level: 3 },
                { kanji: 'Êó©', reading: '„ÅØ„ÇÑ', meaning: 'Îπ†Î•¥Îã§', kunReading: '„ÅØ„ÇÑ (ÌïòÏïº)', onReading: '„ÇΩ„Ç¶„Éª„Çµ„ÉÉ (ÏÜå¬∑ÏÇø)', level: 3 },
                { kanji: 'ÈÅÖ', reading: '„Åä„Åù', meaning: 'Îä¶Îã§', kunReading: '„Åä„Åù„Éª„Åä„Åè (Ïò§ÏÜå¬∑Ïò§Ïø†)', onReading: '„ÉÅ (Ïπò)', level: 3 },
                { kanji: 'Êñ∞', reading: '„ÅÇ„Åü„Çâ', meaning: 'ÏÉàÎ°≠Îã§', kunReading: '„ÅÇ„Åü„Çâ (ÏïÑÌÉÄÎùº)', onReading: '„Ç∑„É≥ (Ïã†)', level: 3 },
                { kanji: 'Âè§', reading: '„Åµ„Çã', meaning: 'Ïò§ÎûòÎêòÎã§', kunReading: '„Åµ„Çã (ÌõÑÎ£®)', onReading: '„Ç≥ (ÏΩî)', level: 3 },
                { kanji: 'Ëã•', reading: '„Çè„Åã', meaning: 'Ï†äÎã§', kunReading: '„Çè„Åã (ÏôÄÏπ¥)', onReading: '„Ç∏„É£„ÇØ„Éª„Éã„É£„ÇØ (ÏûêÏø†¬∑ÎÉêÏø†)', level: 3 },
                { kanji: 'Â§ö', reading: '„Åä„Åä', meaning: 'ÎßéÎã§', kunReading: '„Åä„Åä (Ïò§Ïò§)', onReading: '„Çø (ÌÉÄ)', level: 3 },
                { kanji: 'Â∞ë', reading: '„Åô„Åè', meaning: 'Ï†ÅÎã§', kunReading: '„Åô„Åè„Éª„Åô„Åì (Ïä§Ïø†¬∑Ïä§ÏΩî)', onReading: '„Ç∑„Éß„Ç¶ (Ïáº)', level: 3 },
                { kanji: 'Èï∑', reading: '„Å™„Åå', meaning: 'Í∏∏Îã§', kunReading: '„Å™„Åå (ÎÇòÍ∞Ä)', onReading: '„ÉÅ„Éß„Ç¶ (Ï¥à)', level: 3 },
                { kanji: 'Áü≠', reading: '„Åø„Åò„Åã', meaning: 'ÏßßÎã§', kunReading: '„Åø„Åò„Åã (ÎØ∏ÏßÄÏπ¥)', onReading: '„Çø„É≥ (ÌÉÑ)', level: 3 },
                // Î†àÎ≤® 4 - Í≥†Í∏â ÌïúÏûê (10Í∞ú)
                { kanji: 'Âº∑', reading: '„Å§„Çà', meaning: 'Í∞ïÌïòÎã§', kunReading: '„Å§„Çà (Ï∏†Ïöî)', onReading: '„Ç≠„Éß„Ç¶„Éª„Ç¥„Ç¶ (Íµê¬∑Í≥†)', level: 4 },
                { kanji: 'Ê≠£', reading: '„Åü„Å†', meaning: 'Î∞îÎ•¥Îã§', kunReading: '„Åü„Å† (ÌÉÄÎã§)', onReading: '„Çª„Ç§„Éª„Ç∑„Éß„Ç¶ (ÏÑ∏Ïù¥¬∑Ïáº)', level: 4 },
                { kanji: 'Áæé', reading: '„ÅÜ„Å§„Åè', meaning: 'ÏïÑÎ¶ÑÎãµÎã§', kunReading: '„ÅÜ„Å§„Åè (Ïö∞Ï∏†Ïø†)', onReading: '„Éì (ÎπÑ)', level: 4 },
                { kanji: 'ÊÇ™', reading: '„Çè„Çã', meaning: 'ÎÇòÏÅòÎã§', kunReading: '„Çè„Çã (ÏôÄÎ£®)', onReading: '„Ç¢„ÇØ„Éª„Ç™ (ÏïÑÏø†¬∑Ïò§)', level: 4 },
                { kanji: 'Âç±', reading: '„ÅÇ„Å∂', meaning: 'ÏúÑÌóòÌïòÎã§', kunReading: '„ÅÇ„Å∂„Éª„ÅÇ„ÇÑ (ÏïÑÎ∂Ä¬∑ÏïÑÏïº)', onReading: '„Ç≠ (ÌÇ§)', level: 4 },
                { kanji: 'ÂÆâ', reading: '„ÇÑ„Åô', meaning: 'ÏïàÏ†ÑÌïòÎã§', kunReading: '„ÇÑ„Åô (ÏïºÏä§)', onReading: '„Ç¢„É≥ (Ïïà)', level: 4 },
                { kanji: '‰æø', reading: '„Åπ„Çì', meaning: 'Ìé∏Î¶¨ÌïòÎã§', kunReading: 'ÏóÜÏùå', onReading: '„Éô„É≥„Éª„Éì„É≥ (Î≤§¬∑Îπà)', level: 4 },
                { kanji: 'Âà©', reading: '„Çä', meaning: 'Ïù¥Ïùµ', kunReading: 'ÏóÜÏùå', onReading: '„É™ (Î¶¨)', level: 4 },
                { kanji: 'Áâπ', reading: '„Å®„Åè', meaning: 'ÌäπÎ≥ÑÌïòÎã§', kunReading: 'ÏóÜÏùå', onReading: '„Éà„ÇØ (ÌÜ†Ïø†)', level: 4 },
                { kanji: 'Âà•', reading: '„Åπ„Å§', meaning: 'Îã§Î•¥Îã§', kunReading: '„Çè„Åã (ÏôÄÏπ¥)', onReading: '„Éô„ÉÑ (Î≤†Ï∏†)', level: 4 }
            ];

            const [currentQuestion, setCurrentQuestion] = useState(null);
            const [options, setOptions] = useState([]);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [showResult, setShowResult] = useState(false);
            const [score, setScore] = useState(0);
            const [questionCount, setQuestionCount] = useState(0);
            const [lives, setLives] = useState(3);
            const [gameOver, setGameOver] = useState(false);
            const [streak, setStreak] = useState(0);
            const [maxStreak, setMaxStreak] = useState(0);
            const [usedQuestions, setUsedQuestions] = useState([]);
            const [gameCompletionType, setGameCompletionType] = useState('');
            const [selectedLevel, setSelectedLevel] = useState('all');
            const [questionType, setQuestionType] = useState('meaning');
            const [targetQuestionCount, setTargetQuestionCount] = useState(20);
            const [inputValue, setInputValue] = useState('20');

            let audioContext = null;

            const playSound = (frequencies) => {
                try {
                    if (!audioContext) {
                        audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    }
                    frequencies.forEach((freq, index) => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + index * 0.1);
                        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime + index * 0.1);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + index * 0.1 + 0.2);
                        oscillator.start(audioContext.currentTime + index * 0.1);
                        oscillator.stop(audioContext.currentTime + index * 0.1 + 0.2);
                    });
                } catch (err) {
                    console.log('Ïò§ÎîîÏò§ Ïû¨ÏÉù Î∂àÍ∞Ä');
                }
            };

            const vibrate = (pattern) => {
                if ('vibrate' in navigator && navigator.vibrate) {
                    try { navigator.vibrate(pattern); } catch (err) {}
                }
            };

            const handleQuestionCountChange = (value) => {
                setInputValue(value);
                const numValue = parseInt(value);
                if (!isNaN(numValue) && numValue >= 1 && numValue <= 100) {
                    setTargetQuestionCount(numValue);
                }
            };

            const handleQuestionCountBlur = () => {
                const numValue = parseInt(inputValue);
                if (isNaN(numValue) || numValue < 1 || numValue > 100) {
                    setInputValue(targetQuestionCount.toString());
                } else {
                    setTargetQuestionCount(numValue);
                }
            };

            const getFilteredKanjiData = () => {
                if (selectedLevel === 'all') return kanjiData;
                return kanjiData.filter(kanji => kanji.level === parseInt(selectedLevel));
            };

            const generateQuestion = (trackAsUsed = true) => {
                if (gameOver) return;
                const filteredData = getFilteredKanjiData();
                const unusedData = filteredData.filter(kanji => !usedQuestions.includes(kanji.kanji));

                if (unusedData.length === 0) {
                    setGameOver(true);
                    setGameCompletionType('complete');
                    playSound([523.25, 659.25, 783.99, 1046.50]);
                    vibrate([100, 50, 100, 50, 100, 50, 200]);
                    return;
                }

                const randomKanji = unusedData[Math.floor(Math.random() * unusedData.length)];
                const correctAnswer = questionType === 'meaning' ? randomKanji.meaning : randomKanji.reading;

                const wrongAnswers = kanjiData
                    .filter(k => k.kanji !== randomKanji.kanji)
                    .map(k => questionType === 'meaning' ? k.meaning : k.reading)
                    .filter(answer => answer !== correctAnswer)
                    .filter((answer, index, arr) => arr.indexOf(answer) === index)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 3);

                const allOptions = [correctAnswer, ...wrongAnswers].sort(() => Math.random() - 0.5);

                setCurrentQuestion(randomKanji);
                setOptions(allOptions);
                setSelectedAnswer(null);
                setShowResult(false);

                if (trackAsUsed) {
                    setUsedQuestions(prev => [...prev, randomKanji.kanji]);
                }
            };

            const handleAnswerSelect = (answer) => {
                if (showResult) return;

                setSelectedAnswer(answer);
                setShowResult(true);

                const correctAnswer = questionType === 'meaning' ? currentQuestion.meaning : currentQuestion.reading;
                const isCorrect = answer === correctAnswer;

                const newQuestionCount = questionCount + 1;
                setQuestionCount(newQuestionCount);

                if (isCorrect) {
                    setScore(score + 10);
                    setStreak(streak + 1);
                    setMaxStreak(Math.max(maxStreak, streak + 1));
                    playSound([523.25, 659.25, 783.99]);
                    vibrate([100, 50, 100]);
                } else {
                    setLives(lives - 1);
                    setStreak(0);
                    playSound([392.00, 329.63, 261.63]);
                    vibrate([200]);

                    if (lives <= 1) {
                        setGameOver(true);
                        setGameCompletionType('lives');
                        return;
                    }
                }

                if (newQuestionCount >= targetQuestionCount) {
                    setGameOver(true);
                    setGameCompletionType('target');
                    playSound([523.25, 659.25, 783.99, 1046.50]);
                    vibrate([100, 50, 100, 50, 100, 50, 200]);
                }
            };

            const nextQuestion = () => {
                if (gameOver) return;
                generateQuestion(true);
            };

            const resetGame = () => {
                setScore(0);
                setQuestionCount(0);
                setLives(3);
                setGameOver(false);
                setStreak(0);
                setSelectedAnswer(null);
                setShowResult(false);
                setUsedQuestions([]);
                setGameCompletionType('');
                setInputValue(targetQuestionCount.toString());
                generateQuestion(true);
            };

            const toggleQuestionType = () => {
                setQuestionType(questionType === 'meaning' ? 'reading' : 'meaning');
            };

            useEffect(() => {
                setUsedQuestions([]);
                setQuestionCount(0);
                setScore(0);
                setStreak(0);
                setSelectedAnswer(null);
                setShowResult(false);
                generateQuestion(true);
            }, [questionType, selectedLevel]);

            useEffect(() => {
                setInputValue(targetQuestionCount.toString());
            }, [targetQuestionCount]);

            if (gameOver) {
                let completionMessage, completionEmoji;

                if (gameCompletionType === 'complete') {
                    completionMessage = 'ÍµâÏû•Ìï¥Ïöî! Î™®Îì† Î¨∏Ï†úÎ•º Îã§ ÌíÄÏóàÏäµÎãàÎã§!';
                    completionEmoji = 'üéâ';
                } else if (gameCompletionType === 'target') {
                    completionMessage = 'Î™©Ìëú Îã¨ÏÑ±! ' + targetQuestionCount + 'Î¨∏Ï†úÎ•º ÏôÑÎ£åÌñàÏäµÎãàÎã§!';
                    completionEmoji = 'üéØ';
                } else {
                    completionMessage = 'Ïù¥Îü∞, ÏïÑÏâ¨ÏõåÏöî.';
                    completionEmoji = 'üò¢';
                }

                return e('div', { className: 'game-over-screen' },
                    e('div', { className: 'game-over-card' },
                        e('div', { className: 'emoji-large' }, completionEmoji),
                        e('h2', { className: 'title-large' }, completionMessage),
                        e('div', { className: 'stats-container' },
                            e('div', { className: 'stat-text' },
                                'ÏµúÏ¢Ö Ï†êÏàò: ',
                                e('span', { className: 'highlight-purple' }, score + 'Ï†ê')
                            ),
                            e('div', { className: 'stat-text-sm' },
                                'ÌíÄÏù¥Ìïú Î¨∏Ï†ú: ' + questionCount + 'Í∞ú / ' + targetQuestionCount + 'Í∞ú (Î™©Ìëú)'
                            ),
                            e('div', { className: 'stat-text-xs' },
                                'Ïù¥Ïö© Í∞ÄÎä•Ìïú Î¨∏Ï†ú: ' + getFilteredKanjiData().length + 'Í∞ú / Ï¥ù ' + kanjiData.length + 'Í∞ú'
                            ),
                            e('div', { className: 'stat-text-sm' }, 'ÏµúÍ≥† Ïó∞ÏÜç: ' + maxStreak + 'Í∞ú'),
                            e('div', { className: 'stat-text-sm' },
                                'Ï†ïÎãµÎ•†: ' + (questionCount > 0 ? Math.round((score / (questionCount * 10)) * 100) : 0) + '%'
                            )
                        ),
                        e('button', { onClick: resetGame, className: 'btn-gradient' }, 'üîÑ Îã§Ïãú ÏãúÏûë')
                    )
                );
            }

            if (!currentQuestion) {
                return e('div', { className: 'loading-screen' },
                    e('div', { className: 'loading-text' }, 'Î¨∏Ï†ú Ï§ÄÎπÑ Ï§ë...')
                );
            }

            const correctAnswer = questionType === 'meaning' ? currentQuestion.meaning : currentQuestion.reading;

            return e('div', { className: 'container' },
                e('div', { className: 'max-w-container' },
                    e('div', { className: 'info-bar' },
                        e('div', { className: 'info-row' },
                            e('div', { className: 'info-group' },
                                e('div', { className: 'info-item' },
                                    e('span', { className: 'info-icon' }, 'üèÜ'),
                                    e('span', { className: 'info-value' }, score + 'Ï†ê')
                                ),
                                e('div', { className: 'info-item' },
                                    e('span', { className: 'info-icon' }, 'üß†'),
                                    e('span', null, 'Ïó∞ÏÜç ' + streak)
                                )
                            ),
                            e('div', { className: 'lives-container' },
                                Array.from({length: 3}, (_, i) =>
                                    e('span', {
                                        key: i,
                                        className: 'life-icon' + (i < lives ? '' : ' inactive')
                                    }, '‚ù§Ô∏è')
                                )
                            )
                        ),
                        e('div', { className: 'controls-row' },
                            e('select', {
                                value: selectedLevel,
                                onChange: (ev) => setSelectedLevel(ev.target.value),
                                className: 'control-select'
                            },
                                e('option', { value: 'all' }, 'Ï†ÑÏ≤¥ Î†àÎ≤®'),
                                e('option', { value: '1' }, 'Î†àÎ≤® 1 (Í∏∞Ï¥à)'),
                                e('option', { value: '2' }, 'Î†àÎ≤® 2 (ÏùºÏÉÅ)'),
                                e('option', { value: '3' }, 'Î†àÎ≤® 3 (Ï§ëÍ∏â)'),
                                e('option', { value: '4' }, 'Î†àÎ≤® 4 (Í≥†Í∏â)')
                            ),
                            e('input', {
                                type: 'number',
                                min: '1',
                                max: '100',
                                value: inputValue,
                                onChange: (ev) => handleQuestionCountChange(ev.target.value),
                                onBlur: handleQuestionCountBlur,
                                onKeyDown: (ev) => { if (ev.key === 'Enter') ev.target.blur(); },
                                className: 'control-input',
                                placeholder: 'Î¨∏Ï†ú Ïàò'
                            }),
                            e('button', {
                                onClick: toggleQuestionType,
                                className: 'control-btn'
                            }, questionType === 'meaning' ? 'Îúª ‚Üí ÏùΩÍ∏∞' : 'ÏùΩÍ∏∞ ‚Üí Îúª'),
                            e('button', {
                                onClick: () => generateQuestion(false),
                                disabled: showResult,
                                className: 'control-btn'
                            }, 'üîÄ Î¨∏Ï†ú Î∞îÍæ∏Í∏∞'),
                            e('div', { className: 'control-info' },
                                'üîäüì≥ ',
                                questionCount + '/' + targetQuestionCount
                            )
                        )
                    ),

                    e('div', { className: 'quiz-card' },
                        e('div', { className: 'quiz-header' },
                            e('div', { className: 'kanji-display' },
                                e('div', { className: 'kanji-char' }, currentQuestion.kanji),
                                e('div', { className: 'question-text' },
                                    questionType === 'meaning' ? 'Ïù¥ ÌïúÏûêÏùò ÎúªÏùÄ?' : 'Ïù¥ ÌïúÏûêÏùò ÏùΩÍ∏∞Îäî?'
                                )
                            ),
                            e('div', { className: 'question-info' },
                                'Î¨∏Ï†ú ' + (questionCount + 1) + ' / ' + targetQuestionCount + ' ‚Ä¢ Î†àÎ≤® ' + currentQuestion.level
                            )
                        ),

                        e('div', { className: 'options-container' },
                            options.map((option, index) => {
                                let btnClass = 'option-btn';

                                if (showResult) {
                                    if (option === correctAnswer) {
                                        btnClass += ' correct';
                                    } else if (option === selectedAnswer && option !== correctAnswer) {
                                        btnClass += ' wrong';
                                    } else {
                                        btnClass += ' disabled';
                                    }
                                }

                                return e('button', {
                                    key: index,
                                    onClick: () => handleAnswerSelect(option),
                                    className: btnClass,
                                    disabled: showResult
                                }, option);
                            })
                        ),

                        showResult && e('div', { className: 'result-container' },
                            e('div', {
                                className: 'result-text ' + (selectedAnswer === correctAnswer ? 'correct' : 'wrong')
                            }, selectedAnswer === correctAnswer ? 'Ï†ïÎãµÏûÖÎãàÎã§! üéâ' : 'ÌãÄÎ†∏ÏäµÎãàÎã§ üòÖ'),

                            e('div', { className: 'detail-box' },
                                e('div', { className: 'detail-grid' },
                                    e('div', null,
                                        e('strong', null, 'ÌïúÏûê: '),
                                        e('span', { className: 'detail-kanji' }, currentQuestion.kanji)
                                    ),
                                    e('div', null, e('strong', null, 'Îúª: '), currentQuestion.meaning),
                                    e('div', null,
                                        e('strong', null, 'ÌõàÎèÖ: '),
                                        currentQuestion.kunReading === 'ÏóÜÏùå' ? 'ÏóÜÏùå' : currentQuestion.kunReading
                                    ),
                                    e('div', null, e('strong', null, 'ÏùåÎèÖ: '), currentQuestion.onReading),
                                    selectedAnswer !== correctAnswer && e('div', { className: 'answer-highlight' },
                                        e('strong', null, 'Ï†ïÎãµ: '), correctAnswer
                                    )
                                )
                            ),

                            e('button', {
                                onClick: nextQuestion,
                                className: 'btn-gradient'
                            }, 'Îã§Ïùå Î¨∏Ï†ú')
                        )
                    )
                )
            );
        }

        ReactDOM.render(React.createElement(KanjiQuizGame), document.getElementById('root'));
    </script>
</body>
</html>
